<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>gtsam_points: gtsam_points</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">gtsam_points
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">gtsam_points </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2home_2runner_2work_2gtsam__points_2gtsam__points_2README"></a> This is a collection of <a href="https://gtsam.org/">GTSAM</a> factors and optimizers for range-based SLAM.</p>
<p>Tested on Ubuntu 22.04 / 24.04 and CUDA 12.2, and NVIDIA Jetson Orin with <b>GTSAM 4.2a9</b>.</p>
<p><a href="https://zenodo.org/doi/10.5281/zenodo.13378351"><img src="https://zenodo.org/badge/819211095.svg" alt="DOI" style="pointer-events: none;" class="inline"/></a> <a href="https://koide3.github.io/gtsam_points/doc_cpp/index.html"><img src="https://img.shields.io/badge/API_list-Doxygen-blue" alt="Doc" class="inline"/></a> <a href="https://github.com/koide3/gtsam_points/actions/workflows/build.yml"><img src="https://github.com/koide3/gtsam_points/actions/workflows/build.yml/badge.svg" alt="Build" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Factors</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Scan Matching Factors</h2>
<ul>
<li><b>IntegratedICPFactor &amp; IntegratedPointToPlaneICPFactor</b> <br  />
 The conventional point-to-point and point-to-plane ICP <a class="el" href="index.html#ICP">[1]</a>.</li>
<li><b>IntegratedGICPFactor</b> <br  />
 Generalized ICP based on the distribution-to-distribution distance <a class="el" href="index.html#GICP">[2]</a>.</li>
<li><b>IntegratedVGICPFactor</b> <br  />
 GICP with voxel-based data association and multi-distribution-correspondence <a class="el" href="index.html#VGICP1">[3]</a><a class="el" href="index.html#VGICP2">[4]</a>.</li>
<li><b>IntegratedVGICPFactorGPU</b> <br  />
 GPU implementation of VGICP <a class="el" href="index.html#VGICP1">[3]</a><a class="el" href="index.html#VGICP2">[4]</a>. <br  />
 To enable this factor, set <code>-DBUILD_WITH_CUDA=ON</code>.</li>
<li><b>IntegratedLOAMFactor</b> <br  />
 Matching cost factor based on the combination of point-to-plane and point-to-edge distances <a class="el" href="index.html#LOAM">[5]</a><a class="el" href="index.html#LEGO">[6]</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Colored Scan Matching Factors</h2>
<ul>
<li><b>IntegratedColorConsistencyFactor</b> <br  />
 Photometric ICP error <a class="el" href="index.html#COLORED">[7]</a>.</li>
<li><b>IntegratedColoredGICPFactor</b> <br  />
 Photometric ICP error + GICP geometric error <a class="el" href="index.html#GICP">[2]</a><a class="el" href="index.html#COLORED">[7]</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Continuous-time ICP Factors</h2>
<ul>
<li><b>IntegratedCT_ICPFactor</b> <br  />
 Continuous Time ICP Factor <a class="el" href="index.html#CTICP">[8]</a>.</li>
<li><b>IntegratedCT_GICPFactor</b> <br  />
 Continuous Time ICP with GICP's D2D matching cost <a class="el" href="index.html#GICP">[2]</a><a class="el" href="index.html#CTICP">[8]</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Bundle Adjustment Factors</h2>
<ul>
<li><b>PlaneEVMFactor and EdgeEVMFactor</b> <br  />
 Bundle adjustment factor based on Eigenvalue minimization <a class="el" href="index.html#BA_EVM">[9]</a>.</li>
<li><b>LsqBundleAdjustmentFactor</b> <br  />
 Bundle adjustment factor based on EVM and EF optimal condition satisfaction <a class="el" href="index.html#BA_LSQ">[10]</a>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Optimizers for GPU Factors</h1>
<p>All the following optimizers were derived from the implementations in GTSAM.</p>
<ul>
<li><b>LevenbergMarquardtOptimizerExt</b></li>
<li><b>ISAM2Ext</b></li>
<li><b>IncrementalFixedLagSmootherExt</b></li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Nearest Neighbor Search</h1>
<ul>
<li><b>KdTree</b> KdTree with parallel tree construction. Derived from <a href="https://github.com/jlblancoc/nanoflann">nanoflann</a>.</li>
<li><b>IncrementalVoxelMap</b> Incremental voxel-based nearest neighbor search (iVox) <a class="el" href="index.html#IVOX">[11]</a>.</li>
<li><b>IncrementalCovarianceVoxelMap</b> Incremental voxelmap with online normal and covariance estimation.</li>
<li><b>FastOccupancyGrid</b> Binary occupancy grid with bit blocks and flat hashing for efficient point cloud overlap estimation.</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
Point Features and Global Point Cloud Registration</h1>
<ul>
<li><b>Point Feature Histogram (PFH)</b> <a class="el" href="index.html#PFH">[13]</a></li>
<li><b>Fast Point Feature Histogram (FPFH)</b> <a class="el" href="index.html#FPFH">[14]</a></li>
<li><b>RANSAC</b> RANSAC-based global point cloud registration. Supports 6DoF and 4DoF (XYZ + Yaw) estimation <a class="el" href="index.html#RANSAC">[15]</a>.</li>
<li><b>Graduated Non-Convexity</b> Graduated Non-Contexity-based global point cloud registration. Supports 6DoF and 4DoF (XYZ + Yaw) estimation <a class="el" href="index.html#GNC">[16]</a>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
Object Segmentation</h1>
<ul>
<li><b>Region Growing Segmentation</b> <a class="el" href="index.html#RegionGrowing">[17]</a></li>
<li><b>Min-Cut Segmentation</b> <a class="el" href="index.html#MinCut">[18]</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Continuous-Time Trajectory (Under development)</h1>
<ul>
<li><b>B-Spline</b> Cubic B-Spline-based interpolation and linear acceleration and angular velocity expressions <a class="el" href="index.html#BSPLINE_D">[12]</a>.</li>
<li><b>ContinuousTrajectory</b> Cubic B-Spline-based continuous trajectory representation for offline batch optimization.</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md12"></a>
Install from source</h2>
<div class="fragment"><div class="line"># Install gtsam</div>
<div class="line">git clone https://github.com/borglab/gtsam</div>
<div class="line">cd gtsam</div>
<div class="line">git checkout 4.2a9</div>
<div class="line"> </div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. \</div>
<div class="line">  -DGTSAM_BUILD_EXAMPLES_ALWAYS=OFF \</div>
<div class="line">  -DGTSAM_BUILD_TESTS=OFF \</div>
<div class="line">  -DGTSAM_WITH_TBB=OFF \</div>
<div class="line">  -DGTSAM_BUILD_WITH_MARCH_NATIVE=OFF</div>
<div class="line"> </div>
<div class="line">make -j$(nproc)</div>
<div class="line">sudo make install</div>
<div class="line"> </div>
<div class="line"># [optional] Install iridescence visualization library</div>
<div class="line"># This is required for only demo programs</div>
<div class="line">sudo apt install -y libglm-dev libglfw3-dev libpng-dev</div>
<div class="line">git clone https://github.com/koide3/iridescence --recursive</div>
<div class="line">mkdir iridescence/build &amp;&amp; cd iridescence/build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">make -j$(nproc)</div>
<div class="line">sudo make install</div>
<div class="line"> </div>
<div class="line">## Build gtsam_points</div>
<div class="line">git clone https://github.com/koide3/gtsam_points</div>
<div class="line">mkdir gtsam_points/build &amp;&amp; cd gtsam_points/build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line"> </div>
<div class="line"># Optional cmake arguments</div>
<div class="line"># cmake .. \</div>
<div class="line">#   -DBUILD_DEMO=OFF \</div>
<div class="line">#   -DBUILD_TESTS=OFF \</div>
<div class="line">#   -DBUILD_WITH_CUDA=OFF \</div>
<div class="line">#   -DBUILD_WITH_MARCH_NATIVE=OFF</div>
<div class="line"> </div>
<div class="line">make -j$(nproc)</div>
<div class="line">sudo make install</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
Install from &lt;a href="https://github.com/koide3/ppa" &gt;PPA&lt;/a&gt; [AMD64, ARM64]</h2>
<h3><a class="anchor" id="autotoc_md14"></a>
Setup PPA</h3>
<h4><a class="anchor" id="autotoc_md15"></a>
Ubuntu 24.04</h4>
<div class="fragment"><div class="line">curl -s --compressed &quot;https://koide3.github.io/ppa/ubuntu2404/KEY.gpg&quot; | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/koide3_ppa.gpg &gt;/dev/null</div>
<div class="line">echo &quot;deb [signed-by=/etc/apt/trusted.gpg.d/koide3_ppa.gpg] https://koide3.github.io/ppa/ubuntu2404 ./&quot; | sudo tee /etc/apt/sources.list.d/koide3_ppa.list</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md16"></a>
Ubuntu 22.04</h4>
<div class="fragment"><div class="line">curl -s --compressed &quot;https://koide3.github.io/ppa/ubuntu2204/KEY.gpg&quot; | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/koide3_ppa.gpg &gt;/dev/null</div>
<div class="line">echo &quot;deb [signed-by=/etc/apt/trusted.gpg.d/koide3_ppa.gpg] https://koide3.github.io/ppa/ubuntu2204 ./&quot; | sudo tee /etc/apt/sources.list.d/koide3_ppa.list</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md17"></a>
Ubuntu 20.04</h4>
<div class="fragment"><div class="line">curl -s --compressed &quot;https://koide3.github.io/ppa/ubuntu2004/KEY.gpg&quot; | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/koide3_ppa.gpg &gt;/dev/null</div>
<div class="line">echo &quot;deb [signed-by=/etc/apt/trusted.gpg.d/koide3_ppa.gpg] https://koide3.github.io/ppa/ubuntu2004 ./&quot; | sudo tee /etc/apt/sources.list.d/koide3_ppa.list</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md18"></a>
Install GTSAM and gtsam_points</h3>
<h4><a class="anchor" id="autotoc_md19"></a>
Without CUDA</h4>
<div class="fragment"><div class="line">sudo apt update &amp;&amp; sudo apt install -y libgtsam-points-dev</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md20"></a>
With CUDA 12.2</h4>
<div class="fragment"><div class="line">sudo apt update &amp;&amp; sudo apt install -y libgtsam-points-cuda12.2-dev</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md21"></a>
With CUDA 12.5</h4>
<div class="fragment"><div class="line">sudo apt update &amp;&amp; sudo apt install -y libgtsam-points-cuda12.5-dev</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md22"></a>
Demo</h1>
<div class="fragment"><div class="line">cd gtsam_points</div>
<div class="line">./build/demo_matching_cost_factors</div>
<div class="line">./build/demo_bundle_adjustment</div>
<div class="line">./build/demo_continuous_time</div>
<div class="line">./build/demo_continuous_trajectory</div>
<div class="line">./build/demo_colored_registration</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md23"></a>
Videos</h1>
<ul>
<li><a href="https://youtu.be/HCXCWlx_VOM">Multi-scan registration of 5 frames (= A graph with 10 registration factors)</a></li>
<li><a href="https://youtu.be/tuDV0GCOZXg">Bundle adjustment factor</a></li>
<li><a href="https://youtu.be/Xv2-qDlzQYM">Continuous-time ICP factor</a></li>
<li><a href="https://youtu.be/xEQmiFV79LU">Colored ICP factor</a></li>
<li><a href="https://youtu.be/gDiKqQDc7yo">Incremental voxel mapping and normal estimation</a></li>
<li><a href="https://youtu.be/etAI8go3b8U">SE3 BSpline interpolation</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
License</h1>
<p>This library is released under the MIT license.</p>
<h1><a class="anchor" id="autotoc_md25"></a>
Citation</h1>
<div class="fragment"><div class="line">@software{gtsam_points,</div>
<div class="line">  author       = {Kenji Koide},</div>
<div class="line">  title        = {gtsam_points : A collection of GTSAM factors and optimizers for point cloud SLAM},</div>
<div class="line">  month        = Aug,</div>
<div class="line">  year         = 2024,</div>
<div class="line">  publisher    = {Zenodo},</div>
<div class="line">  version      = {1.0.4},</div>
<div class="line">  doi          = {10.5281/zenodo.13378352},</div>
<div class="line">  url          = {https://github.com/koide3/gtsam_points)}}</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md26"></a>
Dependencies</h1>
<ul>
<li><a href="https://eigen.tuxfamily.org/index.php">Eigen</a></li>
<li><a href="https://github.com/jlblancoc/nanoflann">nanoflann</a></li>
<li><a href="https://gtsam.org/">GTSAM</a></li>
<li>[optional] <a href="[https://www.openmp.org/](https://pointclouds.org/)">PCL</a></li>
<li>[optional] <a href="https://www.openmp.org/">OpenMP</a></li>
<li>[optional] <a href="https://developer.nvidia.com/cuda-toolkit">CUDA</a></li>
<li>[optional] <a href="https://github.com/koide3/iridescence">iridescence</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md27"></a>
Disclaimer</h1>
<p>The test data in <code>data</code> directory are generated from <a href="http://www.cvlibs.net/datasets/kitti/">The KITTI Vision Benchmark Suite</a> and <a href="https://ori-drs.github.io/newer-college-dataset/">The Newer College Dataset</a>. Because they employ <code>Creative Commons BY-NC-SA License 3.0 and 4.0</code>, the test data must not be used for commercial purposes.</p>
<h1><a class="anchor" id="autotoc_md28"></a>
References</h1>
<p><a class="anchor" id="ICP"></a> [1] Zhang, "Iterative Point Matching for Registration of Free-Form Curve", IJCV1994 <br  />
 <a class="anchor" id="GICP"></a> [2] Segal et al., "Generalized-ICP", RSS2005 <br  />
 <a class="anchor" id="VGICP1"></a> [3] Koide et al., "Voxelized GICP for Fast and Accurate 3D Point Cloud Registration", ICRA2021 <br  />
 <a class="anchor" id="VGICP2"></a> [4] Koide et al., "Globally Consistent 3D LiDAR Mapping with GPU-accelerated GICP Matching Cost Factors", RA-L2021 <br  />
 <a class="anchor" id="LOAM"></a> [5] Zhang and Singh, "Low-drift and real-time lidar odometry and mapping", Autonomous Robots, 2017 <br  />
 <a class="anchor" id="LEGO"></a> [6] Tixiao and Brendan, "LeGO-LOAM: Lightweight and Ground-Optimized Lidar Odometry and Mapping on Variable Terrain", IROS2018 <br  />
 <a class="anchor" id="COLORED"></a> [7] Park et al., "Colored Point Cloud Registration Revisited", ICCV2017 <br  />
 <a class="anchor" id="CTICP"></a> [8] Bellenbach et al., "CT-ICP: Real-time Elastic LiDAR Odometry with Loop Closure", 2021 <br  />
 <a class="anchor" id="BA_EVM"></a> [9] Liu and Zhang, "BALM: Bundle Adjustment for Lidar Mapping", IEEE RA-L, 2021 <br  />
 <a class="anchor" id="BA_LSQ"></a> [10] Huang et al, "On Bundle Adjustment for Multiview Point Cloud Registration", IEEE RA-L, 2021 <br  />
 <a class="anchor" id="IVOX"></a> [11] Bai et al., "Faster-LIO: Lightweight Tightly Coupled Lidar-Inertial Odometry Using Parallel Sparse Incremental Voxels", IEEE RA-L, 2022 <br  />
 <a class="anchor" id="BSPLINE_D"></a> [12] Sommer et al., "Efficient Derivative Computation for Cumulative B-Splines on Lie Groups", CVPR2020 <br  />
 <a class="anchor" id="PFH"></a> [13] Rusu et al., "ligning Point Cloud Views using Persistent Feature Histograms", IROS2008 <br  />
 <a class="anchor" id="FPFH"></a> [14] Rusu et al., "Fast Point Feature Histograms (FPFH) for 3D Registration", ICRA2009 <br  />
 <a class="anchor" id="RANSAC"></a> [15] Buch et al., "Pose Estimation using Local Structure-Specific Shape and Appearance Context", ICRA2013 <br  />
 <a class="anchor" id="GNC"></a> [16] Zhou et al., "Fast Global Registration", ECCV2016 <br  />
 <a class="anchor" id="RegionGrowing"></a> [17] Rabbani et al., "Segmentation of Point Clouds Using Smoothness Constraint", Remote Sensing and Spatial Information Sciences, 2006 <br  />
 <a class="anchor" id="MinCut"></a> [18] Golovinskiy et al., "Min-Cut Based Segmentation of Point Clouds", S3DV-WS@ICCV2009 <br  />
 </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
